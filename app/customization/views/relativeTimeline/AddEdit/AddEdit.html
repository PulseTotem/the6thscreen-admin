<div class="container-fluid" ng-controller="T6SCustomization.AddEditRelativeTimelineCtrl">
  <div class="row">
    <div class="col-md-12 customization-timeline-name">
      <h2 editable-text="timelineName" e-form="textBtnForm">
        {{ timelineName || ('MAIN.EMPTY' | translate) }}
      </h2>
      <button class="btn btn-default" ng-click="textBtnForm.$show()" ng-hide="textBtnForm.$visible" translate="MAIN.EDIT">
      </button>
    </div>
  </div>

  <div class="row customization-timeline-services">
    <div class="col-md-12">
      <div>
        <button ng-repeat="service in zone.services" class="customization-timeline-service pull-left" ng-click="showServiceId!={{service.id}}?updateShowServiceId({{service.id}}):updateShowServiceId(-1)" ng-class="{'customization-timeline-service-active' : showServiceId == {{service.id}} }">
          <img ng-src="{{service.logo}}" /> <span class="badge">{{service.callTypes.length}}</span>
        </button>
        <div class="clearfix">&nbsp;</div>
      </div>
      <div class="well well-lg" ng-repeat="service in zone.services" ng-show="showServiceId=={{service.id}}">
        <ul class="customization-timeline-calltypes">
          <li ng-repeat="callType in service.callTypes" class="customization-timeline-calltype pull-left"
              ng-drag="true" ng-drag-data="callType" ng-center-anchor="true" ng-drag-success="onDragComplete($data,$event)">
            Source : {{callType.source.name}}
            Renderer : {{callType.renderer.name}}
          </li>
          <li class="clearfix">&nbsp;</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="customization-timeline-representation">
        <span ng-show="timeline.relativeEvents.length == 0" translate="CUSTOMIZATION.TIMELINE_ADDEDIT.DROP_SOMETHING"
              ng-drop="true" ng-drop-success="onDropComplete(-1, $data,$event)"></span>
        <div class="customization-timeline-event pull-left" ng-repeat="event in timeline.relativeEvents" style="width: {{(event.duration / timelineDuration)*100}}%">
          <div class="customization-timeline-event-description"
               ng-drop="true" ng-drop-success="onDropComplete($index, $data,$event)"
               ng-drag="true" ng-drag-data="event" ng-center-anchor="true"
               ng-click="updateCall(event.call)">
            <img ng-src="{{callTypes[event.call.callType.id].logo}}" /> {{event.name}}
<span>
  call: {{call.id}}
</span>
          </div>
          <div class="customization-timeline-event-time">
            <span class="pull-left" ng-show="$index==0">00h 00m 00s</span>
            <span class="pull-right customization-timeline-event-time-enddate">{{events[event.id]}}</span>
          </div>
        </div>
      </div>
      <div class="clearfix">&nbsp;</div>
    </div>
  </div>
{{call}}
  <div class="row">
    <div class="col-md-6">
      <div class="customization-timeline-event-update" ng-include="'customization/views/call/AddEdit.html'" ng-controller="T6SCustomization.AddEditCallCtrl">

      </div>
    </div>
  </div>
</div>
